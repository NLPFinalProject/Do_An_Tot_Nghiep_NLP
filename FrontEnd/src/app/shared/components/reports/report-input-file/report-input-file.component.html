<br />
<h5>
  <b>{{ 'History' | translate }} </b>
</h5>
<br />

<div class="gutter-box">
  <nz-table #filterTable [nzData]="displayData" [nzLoading]="loading" [nzPageSize]="10">
    <thead (nzSortChange)="sort($event)" nzSingleSort>
      <tr>
        <th nzShowExpand></th>
        <th>Tên phiên</th>
        <th nzShowSort nzSortKey="Date">Ngày tải lên</th>
        <th>Tổng tệp tải lên</th>
        <th [nzFilters]="columnFilter.listOfFilter" [nzFilterFn]="columnFilter.filterFn">{{ columnFilter.name }}</th>

        <th [nzFilters]="columnFilter2.listOfFilter" [nzFilterFn]="columnFilter2.filterFn">{{ columnFilter2.name }}</th>
      </tr>
    </thead>
    <tbody>
      <ng-template ngFor let-data [ngForOf]="filterTable.data">
        <tr (click)="Warning(data)">
          <td nzShowExpand [(nzExpand)]="data.expand"></td>
          <td>
            <div *ngIf="data.SessionName">
              {{ data.SessionName }}
            </div>
            <div *ngIf="!data.SessionName">
              {{ data.id }}
            </div>
          </td>
          <td>
            <b>{{ data.Date | date: 'medium' }}</b>
          </td>
          <td>
            <nz-badge
              [nzCount]="data.NumOfFile"
              [nzOverflowCount]="999"
              [nzStyle]="{ backgroundColor: '#52c41a' }"
            ></nz-badge>
          </td>
          <td>
            {{ data.Status }}
          </td>

          <td>
            <div *ngIf="!data.SessionType"></div>
            <div *ngIf="data.SessionType">
              {{ data.SessionType }}
            </div>
          </td>
        </tr>
        <tr [nzExpand]="data.expand">
          <td></td>
          <td colspan="5">
            <nz-table [nzData]="data.ChildReport" nzSize="middle" [nzShowPagination]="false">
              <tbody>
                <tr (click)="goToDetail(data)">
                  <td>
                    <b>success</b>
                  </td>
                  <td>
                    <b>{{ data.ChildReport.success }}</b>
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>loading</b>
                  </td>
                  <td>
                    <b>{{ data.ChildReport.loading }}</b>
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>Fail</b>
                  </td>
                  <td>
                    <b>{{ data.ChildReport.fail }}</b>
                  </td>
                </tr>
              </tbody>
            </nz-table>
          </td>
        </tr>
      </ng-template>
    </tbody>
  </nz-table>
</div>
